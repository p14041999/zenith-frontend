<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="/explorer.css">
    <link rel="stylesheet" href="/css/all.min.css">
    <title>Zenith Explorer - Powered by Code Partner</title>
    <link rel="shortcut icon" href="/logo.png" type="image/x-icon">
    <link rel="icon" href="/logo.png" type="image/x-icon">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@600;700&family=Jost:ital,wght@0,300;0,400;0,500;0,600;1,400&display=swap"
        rel="stylesheet">
</head>
<body>
    <div class="container-fluid p-0 navbarContainer">
        <div class="row">
            <div class="col">
                <nav class="navbar navbar-expand-lg navbar-light mx-auto max980">
                    <a class="navbar-brand" href="#">
                        <img class="navbarlogo" src="/logo_index.png" style="width: 40px;">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
                        <ul class="navbar-nav font-semi color-white">
                            <li class="nav-item">
                                <button class="btn zenBtn  d-flex"
                                    onclick="addToMetamask();">
                                    <img src="/metamasklogo.png">
                                    <div class="texty ml-2"> Add to MetaMask</div>
                                </button>
                            </li>
                            <li class="nav-item">
                                <button class="btn zenBtn " onclick="location.href='https://ico.zenithchain.co/'">
                                    <div class="texty">Zenith Bridge</div>
                                </button>
                            </li>

                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>


    <div class="container-fluid p-0 headerSection">
        <div class="topleftshine"></div>
        <div class="toprightshine"></div>
        <!-- real header column -->
        <div class="row max980 mx-auto" style="align-items: center;">
            <div class="col-12 col-md-5 pl-lg-0">
                <h1 class="nheading">ZENITH CHAIN EXPLORER</h1>
                <form class="row mt-4" action="/search" method="post">
                    <div class="form-group col-12">
                        <input type="text" class="form-control" id="exampleFormControlInput1"
                            placeholder="Search by address, token, transaction, block" required>
                        <button class="btn searchbtn" type="submit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="none"
                                viewBox="0 0 19 19">
                                <path fill="#fff"
                                    d="M17.71 16.29l-3.4-3.39A7.92 7.92 0 0016 8a8 8 0 10-8 8 7.92 7.92 0 004.9-1.69l3.39 3.4a1.002 1.002 0 001.639-.325 1 1 0 00-.219-1.095zM2 8a6 6 0 1112 0A6 6 0 012 8z" />
                            </svg>
                        </button>
                    </div>
                </form>
            </div>
            <div class="col-12 col-md-7 pr-lg-0">
                <div class="rightside">
                    <div class="si">
                        <div class="greenabs">
                        </div>
                        <div>
                            <p>Price</p>
                            <p><span>$<%= price.toLocaleString('en-US') %></span> <span style="font-size:16px">/ Zenith</span></p>
                        </div>
                    </div>
                    <div class="si">
                        <div class="greenabs">
                        </div>
                        <div>
                            <p>Holders</p>
                            <p><%= holders %></p>
                        </div>
                    </div>
                    <div class="si">
                        <div class="greenabs">
                        </div>
                        <div>
                            <p>Total Bocks</p>
                            <p><%= latestBlock.toLocaleString('en-US') %></p>
                        </div>
                    </div>
                    <div class="si">
                        <div class="greenabs">
                        </div>
                        <div>
                            <p>Total Transactions</p>
                            <p><%= totalTx.toLocaleString('en-US') %></p>
                        </div>
                    </div>
                    <div class="si">
                        <div class="greenabs">
                        </div>
                        <div>
                            <p>24hr Volume</p>
                            <p>1,567</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- blocks -->
    <div class="container-fluid p-0 blocksdiv">
        <div class="row max980 pl-3 pr-3 pl-lg-0 pr-lg-0" style="align-items: center;">
            <div class="col-12">
                <div class="d-flex" style="align-items: center; justify-content: space-between;">
                    <h4 class="m-0">Blocks</h4>
                    <button class="btn zenBtn outlined dark" onclick="location.href='https://ico.zenithchain.co/'">
                        <div class="texty">View all Blocks</div>
                    </button>
                </div>
                <div class="blocksContainer d-flex">
                    <%for(let bk of last10Bk){%>
                    <div class="sb">
                        <div class="borderleft"></div>
                        <a href="/block/<%= bk.number %>">
                            <div class="blockid"><%= bk.number %></div>
                        </a>
                        <div class="blockinfo">
                            <div class="fs-6">
                                <span><%= bk.transactions.length %> Transactions</span>
                                <span class="ml-3"></span>
                            </div>
                            <a>
                                <div class="mt-1"><%= bk.gasUsed %> Gas Used</div>
                            </a>
                        </div>
                    </div>
                    <%}%>
                </div>
            </div>
        </div>
    </div>

    <!-- transactions div -->
    <div class="container-fluid p-0 transdiv">
        <div class="row max980 pl-3 pr-3 pl-lg-0 pr-lg-0" style="align-items: center;">
            <div class="col-12">
                <div class="d-flex" style="align-items: center; justify-content: space-between;">
                    <h4 class="m-0">Transactions</h4>
                    <button class="btn zenBtn outlined dark" onclick="location.href='https://ico.zenithchain.co/'">
                        <div class="texty">View all Transactions</div>
                    </button>
                </div>
                <div class="d-flex tranContainer">
                    <%for(let tx of last10Txn){%>
                    <div class="st success">
                        <div class="status">
                            <div class="borderleft"></div>
                            <span class="font-b">Token Transfer</span>
                            <span>Success</span>
                        </div>
                        <div class="tranInfo">
                            <div class="d-flex">
                                <div>Hash</div>
                                <a href=""/tx/<%= tx.hash %>"">
                                    <div class="ml-2 color-purple hashcode">
                                        <%= tx.hash.substr(0,15) %>
                                    </div>
                                </a>
                            </div>
                            <div class="d-flex mt-1">
                                <div>
                                    <span>From</span>
                                    <a href="">
                                        <span class="ml-2 color-purple">0x0e6006...bb0bfc</span>
                                    </a>
                                </div>
                                <div>
                                    <span>To</span>
                                    <a href="">
                                        <span class="ml-2 color-purple"><%= (tx.to?tx.to:tx.contractAddress).substr(0,15) %></span>
                                    </a>
                                </div>
                            </div>
                            <div class="mt-3" style="font-size: 12px;">
                               
                            </div>
                        </div>
                        <div class="value">
                            <div class="color-purple"><%= (Number(tx.value)/10**18).toLocaleString('en-US')%> ZENITH</div>
                            <a href="">
                                <div class="mt-3">Block #170456</div>
                            </a>
                            <div class="font-n">8 seconds ago</div>
                        </div>
                    </div>
                    <%}%>
                </div>
            </div>
        </div>
    </div>
            
        </div>
    </div>
    <div class="hero-section py-5 text-light mt-5 text-center">
        <span class="text-center">Copyright &copy; 2020-2021 Zenith Chain (UAB) Ltd Reg No. 305865705. All rights reserved</span>
    </div>
    <!-- Scripts -->

    <script>
        async function addToMetamask(){
            console.log(window.ethereum != undefined);
            if(window.ethereum != undefined){
            try {
                await ethereum.request({
                    method: 'wallet_switchEthereumChain',
                    params: [{ chainId: '0x4F' }],
                });
            } catch (switchError) {
                // This error code indicates that the chain has not been added to MetaMask.
                if (switchError.code === 4902) {
                    try {
                    await ethereum.request({
                        method: 'wallet_addEthereumChain',
                        params: [{ 
                            chainId: '0x4F',
                            rpcUrl: 'https://dataserver-1.zenithchain.co',
                            nativeCurrency: {
                                name: 'Zenith Coin',
                                symbol: "ZENITH",
                                decimals: 18
                            },
                            blockExplorerUrls:['https://scan.zenithchain.co']
                        }],
                    });
                    } catch (addError) {
                    // handle "add" error
                    }
                }
                // handle other "switch" errors
            }
            }else{
                alert("Please Install Metamask First!")
            }
        }   
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="/main_index.js"></script>
</body>
</html>